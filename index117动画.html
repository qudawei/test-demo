<!--
 * @Description: 
 * @Version: 
 * @Author: David Qu
 * @Date: 2021-06-27 22:26:19
 * @LastEditors: David Qu
 * @LastEditTime: 2021-06-28 10:54:50
-->
<!DOCTYPE html>
<html>

<head>

</head>

<body>

  <p><strong>注释：</strong>Internet Explorer 9 以及更早的版本不支持 animation 属性。</p>

  <div id="valChangeAmt">1123131</div>
  <script src="./js/jquery-1.8.3.min.js"></script>
  <script>
    // 将数字转换为逗号隔开的千分位格式
    function num2qfw(num) {
      num += '';
      if (!num.includes('.')) num += '.';
      return num.replace(/(\d)(?=(\d{3})+\.)/g, function ($0, $1) {
        return $1 + ',';
      }).replace(/\.$/, '');
    }

    // 数值改变动画函数
    function magic_number(value) {
      var num = $("#valChangeAmt");
      num.animate({ count: value }, {
        duration: 500,
        step: function () {
          num.text(num2qfw(parseInt(this.count)));
        },
        complete: function () {
          num.text(num2qfw(parseInt(value)));
        }
      });
    };
    let oldVal = 109374401
    function update() {
      magic_number(oldVal);
      oldVal += Math.random() * 10000
    }
    // update()
    setInterval(update, 2000); //3秒钟执行一次 update();

  </script>
</body>

</html>